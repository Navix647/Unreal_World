> 这里记录平时想到的灵感但还未实现的工作流构想，也记录下已经实现的工作流以及后续可能的优化方案的目录，已实现的工作流需要记录下工作流的目的，技术方案。一定要详细，这个玩意非常值钱。

## 基于 Blender RetopoPlane 的服装物理级褶皱 Morph 与游戏化拓扑的融合管线
背景：想要获得既有MD中仿真出来的不同姿态下的褶皱Morph又有游戏可用级别的拓扑和面数，从而实现Skinning以及良好的Deform，因此必须获得重拓扑后不同姿态的模型。重拓扑简单，但是要融合得到一致的拓扑同时仿真后不同姿态带有非线性变化形状的Cloth非常困难。我相信这个东西一出来放到DAZ3D上面应该是不愁卖的。就是估计很容易被盗。也算回馈社区了。
目前技术方案提炼了两种
通过MD仿真得到不同姿态下的仿真模型，直接使用**Blender**的**RetopoPlane**进行重拓扑，从而得到不同姿态下拓扑相同的服装模型，从而可以有希望对它做Morph。为什么要这么做？因为重拓扑之后，衣服板片是散的，此时如果重新导入到MD里仿真，不仅导入效率非常低，而且一大堆问题，如衣服没有连接起来等问题，如仿真粒度不够的问题，如果细分几次再导入，你又没办法搞定导入效率甚至爆内存的问题。

工作流风险：
1.重拓扑后顶点顺序不一致，尽管顶点拓扑相同，数量相同，UV相同，但是没办法直接用来做Blendshape或者Morph，因此必须找到一套算法实现顶点顺序的映射。

实践：然而一个简单的实践证明了只要UV不动，其他设置都一致的情况下，RetopoPlane生成的低模，顶点数一样，甚至连顶点的索引都一致，这说明，这套流程它可以直接用来做Blendshape或者Morph，不需要算法再去做转换。

2.RetopoPlane没有办法显示MD上面布料线条的连接关系，比如口袋的缝纫位置，这个如果想要精确的话直接用MD的重拓扑是最好的，但是MD的重拓扑非常不好用。因此需要一种办法把MD简单重拓扑的网格以面片方式导出来指导RetopoPlane的流程。如果可以实现，那就完美解决问题了。

实践：通过实践发现在MD重拓扑之后的衣服也可以转换成2D板片，此时只要UV和板片位置一致那就完全实现了使用MD的板片制作RetopoPlane的引导板片，这时候所有的内部线条关系都可以重现出来，非常完美的流程。


3.如果想融合RetopoPlane自动生成厚度的功能，那就得看看不同姿态下生成厚度会不会导致一些撕裂或者顶点数发生变化，如果顶点数发生变化，那厚度功能就没办法使用，得另辟蹊径。虽然没有测试，但大概率也没有问题。

收益：
以上风险如果都能够解决，那就能够得到关于MD近乎完美的Morph了，甚至连厚度的问题都应该能够顺带解决，主要是没办法控制不同姿态下厚度生成出来会不会导致顶点数发生变化。

由这个流程我们得到一个完美的模型，此时只需要放到MetaTailor或者直接用Blender的权重算法即可套到角色身上，当然如果想要搞到DAZ3D上，那还是得要像之前整头发那样的手段才行。我总觉得DAZ3D不太适合保存我未来战略级别的资产保存库，只适合想办法把里面的资产拿出来复用。

缺点：
只有实践该流程才知道，原来这样做拓扑并不能做得很完美，而且必须要人工参与，同时有些情况褶皱如果比较细，褶皱内陷这种情况，顶点Morph很难搞出来，用这种顶点位移Morph的方式表现褶皱不太现实，那种大的硬朗的褶皱就合适。





## 保存Cloth的资产库
1.目前正在使用的DAZ3D方案，转换不同角色模态上有所欠缺，虽然可以通过MD或者MetaTailor实现转换，但是比较麻烦，扩展性不足。好处是DAZ3D资源多，目前在其上面也有了个人不少的积累。

2.因为最后肯定是要搬到UE5里的，因此想办法在UE5里直接构建一套角色自定义系统，或者干脆就利用MetaHuman进行也是一种想法，不知道MetaHuman的支持度怎么样？

3.Character Creator是我绝对不想碰的一个流程，商业软件贵，而且冷门，网络资源不算多。

4.MakeHuman的开源方案目前还在研究当中，等有时间了再研究看看。




眼下最重要的是上面两件事：1个是顶点Morph级别的Wrinkle，2个是承载资源的资产库平台，目前使用DAZ3D，但是DAZ3D局限太多。




## Cloth Simulation： From Marvelous Designer To Houdini
## 布料仿真：从Marvelous Designer到Houdini
如果布料模拟可以把MD里的服装稳定送到Houdini里做布料模拟的话，那么布料褶皱效果可以进入Next Level。因为Houdini的肌肉脂肪模拟和布料模拟是可以放到一起进行仿真从而出现双向影响的一个效果的，因此拟真程度非常逆天，是影视级别的效果，如果这个都实现了，那非常牛叉。




## 跨体型服装同步管线
背景：目前服装模型的再利用，因为MetaTailor的出现服装已经有了完整可用的工作流，但是MetaTailor是商业软件需要付费，价格比较昂贵，因此如果有一套属于自己的工作管线那肯定是非常非常值钱了。我自己目前是有一些方案，但是效率都不怎么样而且有限制条件，MetaTailor的通用性太强了而且效果也非常ok，但是在某些Corner Case下还不完美，如手套等内容，并且没办法定制化，深度改造自己的工作流，因此只适合在某些情况下拿来使用。只要这套管线实现了，那我就可以把其他游戏上或者网络上的所有服装资源拿来复用了。






## Tension Map + Wrinkle Map方案
这个是未来想要研究和探索的方向，目前对渲染对法线图这块的了解还非常少，因此没办法研究，等以后对法线图有更深的研究之后就开始探索这个方案。Wrinkle Map方案就不太需要考虑不同姿态高模如何变成同一姿态的相同拓扑的低模了，难点在其他地方。是一种实时的最高性能方案。
目前必须得研究这个流程了。
尤其是Tension Map。


Tension Map和Wrinkle Map不是同一个东西，Tension Map可以理解为一种实时计算出来的，用来驱动贴图、Morph或者其他东西的一个权重，只不过这个权重也是以Map的形式实时计算。







## Neural Morph Model (NMM) 方案
这个还没研究




# Data-Driven Method

## ML Deformer方案
这个和Pose Driver + Morph流程很像，但是需要数据量更大，表现效果更好。






















## From Any Character Mesh to Standard Mesh like Genesis or MetaHuman Mesh with Corresponding Standard Pose Alignment
通过这个管线，我们可以得到具有标准拓扑模型的任意角色并且还是标准拓扑模型对应的Calibration姿势，不管是A-Pose还是T-Pose尤其是A-Pose，它的手之间会有些差别。






Weight Transfer


Garment Fitting/Registration


Wrap4D Lattice For Garment Fitting






## Rigidity Preserving 刚性保持
### 1. 骨骼约束法（最通用的工业方案）

与其在权重上死磕，不如改变驱动逻辑。

-   **操作思路：** 给每个纽扣、扣环、金属块分配一根**独立的骨骼**（Leaf Bone）。
    
-   **权重处理：** 这些刚体零件 100% 刷在它们各自的骨骼上，完全不参与布料的平滑权重分配。
    
-   **驱动逻辑：** 在三维软件或引擎中，让这些骨骼通过“表面约束”（Surface Constraint）或“顶点父级”跟随布料模型的某个三角面。
    
-   **优点：** 刚体绝对不会变形，且能完美跟随布料的法线旋转。
    

### 2. 采样单点权重法（最简单的权宜之计）

导致刚体脱离布料的主因是刚体上的不同顶点采样了布料上不同位置的权重。

-   **操作思路：** 在进行权重传递（Weight Transfer）后，不要保留平滑的权重。
    
-   **优化操作：** 选中整个刚体（如一个纽扣），找到布料上与其中心最近的一个顶点，将**该顶点的权重数值 100% 复制给整个刚体所有的顶点**。
    
-   **效果：** 这样整个纽扣会像一个整体一样移动，虽然在极度弯曲时仍可能有轻微位移，但由于它只跟随一个“点”的权重，它不会像之前那样因为权重插值而产生拉伸。
    

### 3. UE5 Skin Attachment 系统（现代引擎最优解）

既然你正在深入研究 UE5 和 ML Deformer，这是最推荐的方案。

-   **技术原理：** UE5 提供了一种 **Skin Attachment**（皮肤附件）机制。它允许你在运行阶段将一个静态网格体直接“吸附”在另一个 Skeletal Mesh 的表面。
    
-   **实现方式：**
    
    1.  衣服作为主体进行正常的布料仿真或骨骼驱动。
        
    2.  纽扣作为独立的 Static Mesh，通过 **Skin Attachment** 组件或 **Deformer Graph** 绑定到衣服的特定顶点 ID 上。
        
-   **优点：** 纽扣不占用衣服的骨骼预算，不参与皮肤变形计算，性能好且永远贴合。
    

### 4. 模拟/烘焙阶段的“扣子Link” (Marvelous Designer)

如果你是在 MD 阶段遇到这个问题：

-   **MD 技巧：** 使用 **Button** 工具或者 **Tack On To Surface** 功能。在 MD 内部，扣子是作为附件存在的，它会计算碰撞并跟随布料。
    
-   **导出建议：** 在导出到 Blender 进行重拓扑时，将扣子作为独立物体导出。在后期绑定时，使用上面提到的“骨骼约束”或“Skin Attachment”来还原这种跟随关系，而不是直接把扣子并入衣服网格进行平滑减权。




1.看看为何导出的骨骼朝向不同，如何对齐解决？
方案1：通过导出骨骼驱动原骨骼并烘焙的方式解决问题 （优雅）

方案2：硬核修正骨骼朝向Orientation

2.全力调研MetaHuman，转向MetaHuman做主力了。

3.学习ngSkinTool

4.学习Houdini
> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTc0ODMxNDI4NCwxMDY3MzI3MzMxLDIwNj
AwMjE5OTgsMTMxODUxMDQ4NCw4MDc0MDg2MDIsNDEzMzA1Mjg1
LC0zODY3OTcwODEsLTE4ODU1OTkxMjgsLTE5NDQ2Njg0NzksMT
IzMzMyNzg5NiwtMTIzNzIwMzk0MywtMTA3NzcwMjc2OCwtMTg2
NDM5MTJdfQ==
-->